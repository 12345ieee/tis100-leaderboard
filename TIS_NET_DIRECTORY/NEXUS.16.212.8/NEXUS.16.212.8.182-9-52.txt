@0
#182/9/53

MOV UP ANY
MOV UP ANY
MOV RIGHT DOWN

@1
#-P1

SUB LEFT
MOV ACC RIGHT

A: MOV ACC ANY
JMP A

@2
#DIFF P1

MOV UP ACC
ADD LEFT
MOV ACC DOWN

@3


@4
#P1-P2

SUB UP
MOV ACC DOWN
SUB UP
MOV UP DOWN
JEZ A
MOV 100 DOWN

A: MOV ACC ANY
JMP A

@5
#TEST P2

A: MOV LEFT ACC
ADD RIGHT
MOV -999 DOWN
JNZ A

B: MOV LEFT ACC
ADD RIGHT
MOV ACC DOWN
JEZ B

@6
#TEST P1
A: MOV UP ACC
MOV 0 DOWN
JNZ A
C: MOV UP ACC
MOV ACC LEFT
JEZ C
MOV UP ACC
SUB 100
MOV ACC LEFT
ADD 100
JEZ C
MOV UP ACC
MOV -999 LEFT
JEZ C

@7


@8
#P2-P3+100, P1!=P2
#P2-P3, P1=P2

SUB UP
SUB UP
ADD UP

A: MOV ACC RIGHT
JMP A

@9
#TEST P3

C: ADD UP
JNZ A

MOV 1 RIGHT
JMP C

A: MOV 0 RIGHT
MOV LEFT ACC

@10
MOV ANY DOWN
