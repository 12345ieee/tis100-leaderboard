@0
S2:MOV UP ACC
N: ADD -3
   JLZ 12
   ADD -5
345:MOV ACC RIGHT
   MOV UP ACC
   JNZ N
   MOV 1 LEFT
   JMP Z
12:MOV ACC LEFT
S: MOV UP  ACC
   JNZ N
   MOV 1   LEFT
Z: MOV 3   RIGHT

@1
#1
   JMP J
1: ADD 1
   MOV -1   DOWN
   JMP J
   JMP 1
2: MOV -2 DOWN
J: JRO UP

O: MOV 1    DOWN
   MOV ACC  DOWN

S: MOV 0    ACC
   MOV DOWN RIGHT

@2
J: JRO RIGHT    #3
O: SUB DOWN
   JLZ L
   MOV LEFT NIL
   JEZ Z
G: ADD DOWN
   MOV ACC  DOWN
   MOV 3    DOWN
   JMP S
L: MOV LEFT ACC
Z: MOV DOWN DOWN
   MOV ACC  DOWN
S: MOV -1    ACC
   ADD 1

@3
   JMP J
   JMP 3
   JMP 4
5: ADD 1
   JMP J
4: MOV -1  DOWN
J: JRO ANY
3: MOV 99   LEFT
   JMP J
O: MOV 1   LEFT
   MOV 1   DOWN
   MOV ACC DOWN
   MOV ACC DOWN
S: MOV 0   ACC

@4
#2
S: MOV -1   ACC
   ADD 2
   SUB 1
J: JRO UP
   JGZ G
   MOV UP  RIGHT
   #JEZ Z
L: MOV 1   UP
   JMP S
G: ADD UP
   MOV ACC RIGHT
Z: MOV 2 UP

@5
S: MOV LEFT  ACC
   MOV ACC   UP
   MOV ACC   UP

   MOV RIGHT ACC
   SUB UP
   JLZ L
   MOV UP    NIL
   JEZ Z
G: MOV RIGHT DOWN
   JMP S
L: MOV UP    ACC
Z: MOV RIGHT NIL
   MOV ACC   DOWN

@6
#4
S: MOV -1  ACC
   ADD 1
J: JRO UP
O: SUB UP
   JGZ G
   MOV UP  LEFT
   JEZ Z
L: MOV 5   LEFT
   JMP S
G: ADD UP
   MOV ACC LEFT
   MOV 4   ACC
Z: MOV ACC LEFT
